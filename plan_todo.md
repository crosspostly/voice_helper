# üìã TODO.md - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∏" –≤ –ì–æ–ª–æ—Å–æ–≤–æ–π –ü–æ–º–æ—â–Ω–∏–∫

> **–ü—Ä–æ–µ–∫—Ç:** Voice Helper - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–¥–∞–∂ –∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞" –§–∏–ª–∏–ø–ø–∞ –ë–æ–≥–∞—á–µ–≤–∞  
> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ì–æ–ª–æ—Å–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–æ–º  
> **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** RAG + ChromaDB + –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å

***

## üéØ –ö–û–ù–¶–ï–ü–¶–ò–Ø –ü–†–û–ï–ö–¢–ê

### –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å
–°–æ–∑–¥–∞—Ç—å **–≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–æ—É—á–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º**, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –û–±—É—á–∞–µ—Ç –Ω–∞–≤—ã–∫–∞–º –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞"
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –î–∞—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) + —Ç–µ–∫—Å—Ç
- ‚úÖ –ü–æ–º–Ω–∏—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–±—É—á–µ–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä—Å–æ–Ω—ã "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞"
1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É—Ä–æ–≤–Ω—è** ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ç–æ—á–∫–∏
2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞** ‚Üí Roadmap –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ü–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏** ‚Üí –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏–∑ –∫–Ω–∏–≥–∏
4. **–¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** ‚Üí –î–Ω–µ–≤–Ω–∏–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
5. **–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–æ–¥—Ö–æ–¥–∞** ‚Üí –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

***

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ì–û–õ–û–°–û–í–û–ô –ü–û–ú–û–©–ù–ò–ö                        ‚îÇ
‚îÇ  (Gemini 2.0 Flash Exp - Multimodal Live API)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   –ü–ï–†–°–û–ù–ê    ‚îÇ           ‚îÇ  –î–†–£–ì–ò–ï –ü–ï–†–°–û–ù–´ ‚îÇ
        ‚îÇ "–õ–ò–ù–ì–í–ò–°–¢–ò–ö–ê"‚îÇ           ‚îÇ  (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ) ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           ‚îÇ           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  RAG   ‚îÇ  ‚îÇMemory‚îÇ  ‚îÇSub-Agents‚îÇ
‚îÇEngine  ‚îÇ  ‚îÇStore ‚îÇ  ‚îÇ (#0-#9)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ          ‚îÇ           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       ChromaDB (Vector DB)      ‚îÇ
‚îÇ   ‚Ä¢ –í–µ–∫—Ç–æ—Ä—ã –∫–Ω–∏–≥–∏ (embeddings)  ‚îÇ
‚îÇ   ‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤            ‚îÇ
‚îÇ   ‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

***

## üì¶ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
voice_helper/
‚îú‚îÄ‚îÄ linguistics/                    # –ù–æ–≤—ã–π –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RAG, –ø–µ—Ä—Å–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chroma_client.py        # ChromaDB –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ embeddings.py           # Gemini embeddings
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.py               # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ personas/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coordinator.py          # –ü–µ—Ä—Å–æ–Ω–∞ #0 - –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ communication.py        # –ü–µ—Ä—Å–æ–Ω–∞ #1 - –ú–∞—Å—Ç–µ—Ä –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rapport.py              # –ü–µ—Ä—Å–æ–Ω–∞ #2 - –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ —Ä–∞–ø–ø–æ—Ä—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ emotions.py             # –ü–µ—Ä—Å–æ–Ω–∞ #3 - –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ creativity.py           # –ü–µ—Ä—Å–æ–Ω–∞ #4 - –ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ strategy.py             # –ü–µ—Ä—Å–æ–Ω–∞ #5 - –°—Ç—Ä–∞—Ç–µ–≥ –≤–ª–∏—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fears.py                # –ü–µ—Ä—Å–æ–Ω–∞ #6 - –ü—Å–∏—Ö–æ–ª–æ–≥ —Å—Ç—Ä–∞—Ö–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appearance.py           # –ü–µ—Ä—Å–æ–Ω–∞ #7 - –ö–æ—É—á –ø–æ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ practice.py             # –ü–µ—Ä—Å–æ–Ω–∞ #8 - –ú–∞—Å—Ç–µ—Ä –ø—Ä–∞–∫—Ç–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integrator.py           # –ü–µ—Ä—Å–æ–Ω–∞ #9 - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ rag/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chunker.py              # –†–∞–∑–±–∏–≤–∫–∞ book.md –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retriever.py            # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ generator.py            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ memory/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conversation.py         # –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.py             # –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_profile.py         # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ü–µ–ª–∏, —É—Ä–æ–≤–µ–Ω—å)
‚îÇ   ‚îî‚îÄ‚îÄ voice/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ tts.py                  # Text-to-Speech —á–µ—Ä–µ–∑ Gemini
‚îÇ       ‚îî‚îÄ‚îÄ stt.py                  # Speech-to-Text (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ linguistics_book.md         # –ò—Å—Ö–æ–¥–Ω–∏–∫ –∫–Ω–∏–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ chroma_db/                  # –ü–∞–ø–∫–∞ –¥–ª—è ChromaDB (–ª–æ–∫–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ setup_linguistics_db.py     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ test_personas.py            # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω
‚îú‚îÄ‚îÄ main_linguistics.py             # –ì–ª–∞–≤–Ω—ã–π orchestrator
‚îî‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

***

## üìù –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

---

### **–≠–¢–ê–ü 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 1.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ChromaDB**

**–§–∞–π–ª:** `linguistics/database/chroma_client.py`

```python
"""
ChromaDB –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
–•—Ä–∞–Ω–∏—Ç: –≤–µ–∫—Ç–æ—Ä—ã –∫–Ω–∏–≥–∏, –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤, –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í–ê–ñ–ù–û: ChromaDB —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç)
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:
- Chroma Cloud (–ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å)
- Qdrant (—Å–∞–º–æ—Ö–æ—Å—Ç–∏–Ω–≥)
- Pinecone (–æ–±–ª–∞—á–Ω—ã–π)
"""

import chromadb
from chromadb.config import Settings
import google.generativeai as genai

class LinguisticsDB:
    def __init__(self, persist_directory="./data/chroma_db"):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ChromaDB —Å Gemini embeddings
        
        Args:
            persist_directory: –ü—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ë–î (–ª–æ–∫–∞–ª—å–Ω–æ)
        """
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
        self.client = chromadb.PersistentClient(
            path=persist_directory,
            settings=Settings(
                anonymized_telemetry=False,
                allow_reset=True
            )
        )
        
        # Embedding —Ñ—É–Ω–∫—Ü–∏—è —á–µ—Ä–µ–∑ Gemini
        self.embedding_function = self._create_embedding_function()
        
        # –ö–æ–ª–ª–µ–∫—Ü–∏–∏
        self.book_collection = self._get_or_create_collection("linguistics_book")
        self.conversations = self._get_or_create_collection("user_conversations")
        self.progress = self._get_or_create_collection("user_progress")
    
    def _create_embedding_function(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ embedding —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ Gemini"""
        from chromadb.utils import embedding_functions
        
        return embedding_functions.GoogleGenerativeAiEmbeddingFunction(
            api_key=os.getenv("GEMINI_API_KEY"),
            model_name="models/text-embedding-004",  # 768 dimensions
            task_type="RETRIEVAL_DOCUMENT"
        )
    
    def _get_or_create_collection(self, name):
        """–ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é"""
        try:
            return self.client.get_collection(
                name=name,
                embedding_function=self.embedding_function
            )
        except:
            return self.client.create_collection(
                name=name,
                embedding_function=self.embedding_function,
                metadata={"hnsw:space": "cosine"}
            )
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```txt
chromadb==0.4.22
google-generativeai>=0.3.0
```

***

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 1.2: –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–Ω–∏–≥–∏**

**–§–∞–π–ª:** `linguistics/rag/chunker.py`

```python
"""
–†–∞–∑–±–∏–≤–∫–∞ book.md –Ω–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏
–°—Ç—Ä–∞—Ç–µ–≥–∏—è: –ü–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º (###) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≥–ª–∞–≤
"""

import re
from typing import List, Dict

class BookChunker:
    def __init__(self, file_path: str):
        with open(file_path, 'r', encoding='utf-8') as f:
            self.content = f.read()
    
    def chunk_by_sections(self) -> List[Dict]:
        """
        –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º (### –∑–∞–≥–æ–ª–æ–≤–∫–∏)
        
        Returns:
            List[Dict]: [{
                "text": "...",
                "metadata": {
                    "chapter": "–ß–∞—Å—Ç—å 1",
                    "section": "–ì–ª–∞–≤–∞ 1",
                    "subsection": "¬ß 1.1",
                    "page": 1,
                    "level": "beginner"
                }
            }]
        """
        chunks = []
        
        # Regex –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
        chapter_pattern = r'### (–ß–ê–°–¢–¨ \d+.*?)(?=\n)'
        section_pattern = r'### (–ì–ª–∞–≤–∞ \d+.*?)(?=\n)'
        subsection_pattern = r'### (¬ß ?\d+\.\d+\..*?)(?=\n)'
        
        current_chapter = "–í–≤–µ–¥–µ–Ω–∏–µ"
        current_section = ""
        current_subsection = ""
        
        # –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º
        paragraphs = re.split(r'\n\n+', self.content)
        
        for idx, para in enumerate(paragraphs):
            if len(para.strip()) < 50:  # –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
                continue
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
            if re.match(chapter_pattern, para):
                current_chapter = re.findall(chapter_pattern, para)[0]
                continue
            
            if re.match(section_pattern, para):
                current_section = re.findall(section_pattern, para)[0]
                continue
            
            if re.match(subsection_pattern, para):
                current_subsection = re.findall(subsection_pattern, para)[0]
                continue
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            level = self._detect_level(current_chapter, current_section)
            
            chunks.append({
                "text": para.strip(),
                "metadata": {
                    "chapter": current_chapter,
                    "section": current_section,
                    "subsection": current_subsection,
                    "chunk_id": idx,
                    "level": level,
                    "word_count": len(para.split())
                }
            })
        
        return chunks
    
    def _detect_level(self, chapter: str, section: str) -> str:
        """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏"""
        if "–£–†–û–í–ï–ù–¨ I" in chapter or "–ù–∞—á–∏–Ω–∞—é—â–∏–π" in section:
            return "beginner"
        elif "–£–†–û–í–ï–ù–¨ II" in chapter:
            return "intermediate"
        elif "–£–†–û–í–ï–ù–¨ III" in chapter:
            return "advanced"
        else:
            return "foundation"
```

**–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:** `scripts/setup_linguistics_db.py`

```python
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥–∏ –≤ ChromaDB
–ó–∞–ø—É—Å–∫: python scripts/setup_linguistics_db.py
"""

import sys
sys.path.append('.')

from linguistics.database.chroma_client import LinguisticsDB
from linguistics.rag.chunker import BookChunker
from tqdm import tqdm

def setup_database():
    print("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∏...")
    
    # 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
    db = LinguisticsDB()
    
    # 2. –û—á–∏—Å—Ç–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å)
    # db.client.delete_collection("linguistics_book")
    
    # 3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —á–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
    print("üìö –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏...")
    chunker = BookChunker("data/linguistics_book.md")
    chunks = chunker.chunk_by_sections()
    
    print(f"‚úÇÔ∏è  –†–∞–∑–±–∏—Ç–æ –Ω–∞ {len(chunks)} —á–∞–Ω–∫–æ–≤")
    
    # 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ ChromaDB
    print("üíæ –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...")
    
    batch_size = 100
    for i in tqdm(range(0, len(chunks), batch_size)):
        batch = chunks[i:i+batch_size]
        
        db.book_collection.add(
            documents=[c["text"] for c in batch],
            metadatas=[c["metadata"] for c in batch],
            ids=[f"chunk_{c['metadata']['chunk_id']}" for c in batch]
        )
    
    print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞!")
    print(f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
    print(f"   ‚Ä¢ –í—Å–µ–≥–æ —á–∞–Ω–∫–æ–≤: {db.book_collection.count()}")
    
    # 5. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
    print("\nüîç –¢–µ—Å—Ç–æ–≤—ã–π RAG-–∑–∞–ø—Ä–æ—Å...")
    results = db.book_collection.query(
        query_texts=["–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞–ø–ø–æ—Ä—Ç?"],
        n_results=3
    )
    
    print("–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã:")
    for doc in results['documents'][0]:
        print(f"  ‚Ä¢ {doc[:150]}...")

if __name__ == "__main__":
    setup_database()
```

***

### **–≠–¢–ê–ü 2: –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 2.1: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤**

**–§–∞–π–ª:** `linguistics/memory/conversation.py`

```python
"""
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: user_id -> session_id -> messages[]
"""

from datetime import datetime
from typing import List, Dict
import json

class ConversationMemory:
    def __init__(self, db_client):
        self.db = db_client
        self.collection = db_client.conversations
    
    def add_message(self, user_id: str, message: Dict):
        """
        –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        
        Args:
            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            message: {
                "role": "user" | "assistant",
                "content": "...",
                "timestamp": "2025-11-10T00:30:00",
                "modality": "voice" | "text",
                "persona": "coordinator" | "rapport" | ...,
                "metadata": {...}
            }
        """
        doc_id = f"{user_id}_{message['timestamp']}"
        
        self.collection.add(
            documents=[message["content"]],
            metadatas=[{
                "user_id": user_id,
                "role": message["role"],
                "timestamp": message["timestamp"],
                "modality": message.get("modality", "text"),
                "persona": message.get("persona", "main"),
                **message.get("metadata", {})
            }],
            ids=[doc_id]
        )
    
    def get_recent_history(self, user_id: str, limit: int = 10) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π"""
        results = self.collection.query(
            query_texts=[""],  # –ü—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö
            where={"user_id": user_id},
            n_results=limit
        )
        
        # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ timestamp
        messages = []
        for i, doc in enumerate(results['documents'][0]):
            messages.append({
                "content": doc,
                **results['metadatas'][0][i]
            })
        
        return sorted(messages, key=lambda x: x['timestamp'])
    
    def search_context(self, user_id: str, query: str, limit: int = 5) -> List[Dict]:
        """
        –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤
        –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è: "–¢—ã –ø–æ–º–Ω–∏—à—å, —á—Ç–æ —è –≥–æ–≤–æ—Ä–∏–ª –æ..."
        """
        results = self.collection.query(
            query_texts=[query],
            where={"user_id": user_id},
            n_results=limit
        )
        
        return results
```

***

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 2.2: –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è**

**–§–∞–π–ª:** `linguistics/memory/progress.py`

```python
"""
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ –æ–±—É—á–µ–Ω–∏—è
"""

from datetime import datetime, timedelta
from typing import Dict, List

class ProgressTracker:
    def __init__(self, db_client):
        self.db = db_client
        self.collection = db_client.progress
    
    def init_user(self, user_id: str, goals: List[str]):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        Args:
            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            goals: –¶–µ–ª–∏ –∏–∑ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –≤ –∫–Ω–∏–≥–µ (10 —Ü–µ–ª–µ–π)
        """
        self.collection.add(
            documents=[f"–¶–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {', '.join(goals)}"],
            metadatas=[{
                "user_id": user_id,
                "type": "goals",
                "created_at": datetime.now().isoformat(),
                "goals": goals,
                "level": "beginner",  # –°—Ç–∞—Ä—Ç–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
                "completed_exercises": [],
                "current_chapter": "–í–≤–µ–¥–µ–Ω–∏–µ"
            }],
            ids=[f"{user_id}_goals"]
        )
    
    def update_progress(self, user_id: str, data: Dict):
        """
        –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        
        Args:
            data: {
                "completed_exercise": "–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1.1",
                "chapter": "–ì–ª–∞–≤–∞ 1",
                "level": "beginner",
                "notes": "...",
                "score": 8  # –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ 1-10
            }
        """
        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
        current = self.get_user_progress(user_id)
        
        # –û–±–Ω–æ–≤–ª—è–µ–º
        completed = current.get("completed_exercises", [])
        completed.append({
            "exercise": data["completed_exercise"],
            "timestamp": datetime.now().isoformat(),
            "score": data.get("score", 0),
            "notes": data.get("notes", "")
        })
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º
        self.collection.update(
            ids=[f"{user_id}_progress"],
            metadatas=[{
                **current,
                "completed_exercises": completed,
                "current_chapter": data.get("chapter", current["current_chapter"]),
                "level": data.get("level", current["level"]),
                "updated_at": datetime.now().isoformat()
            }]
        )
    
    def get_user_progress(self, user_id: str) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        results = self.collection.get(
            ids=[f"{user_id}_progress"]
        )
        
        if not results or not results['metadatas']:
            return {}
        
        return results['metadatas'][0]
    
    def get_recommendations(self, user_id: str) -> Dict:
        """
        –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        
        Returns:
            {
                "next_exercise": "...",
                "focus_area": "—Ä–∞–ø–ø–æ—Ä—Ç" | "—ç–º–æ—Ü–∏–∏" | ...,
                "estimated_time": "15 –º–∏–Ω—É—Ç",
                "difficulty": "easy" | "medium" | "hard"
            }
        """
        progress = self.get_user_progress(user_id)
        
        # –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
        completed_count = len(progress.get("completed_exercises", []))
        current_level = progress.get("level", "beginner")
        
        # –ü—Ä–∏–º–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–Ω–∏–≥–∏)
        if completed_count < 5:
            return {
                "next_exercise": "–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (3-15 —Å–µ–∫—É–Ω–¥)",
                "focus_area": "–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",
                "estimated_time": "10 –º–∏–Ω—É—Ç",
                "difficulty": "easy"
            }
        elif completed_count < 15:
            return {
                "next_exercise": "–ü—Ä–∞–∫—Ç–∏–∫–∞ —Ä–∞–ø–ø–æ—Ä—Ç–∞ 1 —É—Ä–æ–≤–Ω—è",
                "focus_area": "—Ä–∞–ø–ø–æ—Ä—Ç",
                "estimated_time": "20 –º–∏–Ω—É—Ç",
                "difficulty": "medium"
            }
        else:
            return {
                "next_exercise": "–ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä - –ª–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–∏—Ä–∞–º–∏–¥—ã",
                "focus_area": "–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å",
                "estimated_time": "30 –º–∏–Ω—É—Ç",
                "difficulty": "hard"
            }
```

***

### **–≠–¢–ê–ü 3: RAG Engine**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 3.1: –ü–æ–∏—Å–∫–æ–≤–∏–∫ –ø–æ –∫–Ω–∏–≥–µ**

**–§–∞–π–ª:** `linguistics/rag/retriever.py`

```python
"""
RAG Retriever - –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–Ω–∏–≥–∏
"""

from typing import List, Dict

class BookRetriever:
    def __init__(self, db_client):
        self.collection = db_client.book_collection
    
    def search(self, query: str, filters: Dict = None, top_k: int = 5) -> List[Dict]:
        """
        –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
        
        Args:
            query: –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            filters: {"level": "beginner", "chapter": "–†–∞–ø–ø–æ—Ä—Ç"}
            top_k: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        
        Returns:
            List[{
                "text": "...",
                "score": 0.95,
                "metadata": {...}
            }]
        """
        # –§–æ—Ä–º–∏—Ä—É–µ–º where-—Ñ–∏–ª—å—Ç—Ä
        where_filter = {}
        if filters:
            if "level" in filters:
                where_filter["level"] = filters["level"]
            if "chapter" in filters:
                where_filter["chapter"] = {"$contains": filters["chapter"]}
        
        # –ü–æ–∏—Å–∫
        results = self.collection.query(
            query_texts=[query],
            where=where_filter if where_filter else None,
            n_results=top_k,
            include=["documents", "metadatas", "distances"]
        )
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        formatted = []
        for i, doc in enumerate(results['documents'][0]):
            formatted.append({
                "text": doc,
                "score": 1 - results['distances'][0][i],  # Cosine similarity
                "metadata": results['metadatas'][0][i]
            })
        
        return formatted
    
    def get_chapter_context(self, chapter_name: str) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≥–ª–∞–≤—ã"""
        results = self.collection.query(
            query_texts=[""],
            where={"chapter": {"$contains": chapter_name}},
            n_results=100  # –í—Å–µ —á–∞–Ω–∫–∏ –≥–ª–∞–≤—ã
        )
        
        return "\n\n".join(results['documents'][0])
```

***

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 3.2: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤**

**–§–∞–π–ª:** `linguistics/rag/generator.py`

```python
"""
RAG Generator - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –∫–Ω–∏–≥–∏
"""

import google.generativeai as genai
from typing import List, Dict

class ResponseGenerator:
    def __init__(self, model_name: str = "gemini-2.0-flash-exp"):
        self.model = genai.GenerativeModel(model_name)
    
    def generate(
        self,
        query: str,
        context: List[Dict],
        persona_prompt: str,
        conversation_history: List[Dict] = None
    ) -> str:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        
        Args:
            query: –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            context: –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–Ω–∏–≥–∏
            persona_prompt: System prompt –ø–µ—Ä—Å–æ–Ω—ã
            conversation_history: –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        
        Returns:
            –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
        """
        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫–Ω–∏–≥–∏
        book_context = "\n\n---\n\n".join([
            f"[–ì–ª–∞–≤–∞: {c['metadata']['chapter']}]\n{c['text']}"
            for c in context
        ])
        
        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
        history_context = ""
        if conversation_history:
            history_context = "\n".join([
                f"{msg['role']}: {msg['content']}"
                for msg in conversation_history[-5:]  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
            ])
        
        # –ü—Ä–æ–º–ø—Ç
        full_prompt = f"""
{persona_prompt}

==== –ö–û–ù–¢–ï–ö–°–¢ –ò–ó –ö–ù–ò–ì–ò "–õ–ò–ù–ì–í–ò–°–¢–ò–ö–ê" ====
{book_context}

==== –ò–°–¢–û–†–ò–Ø –î–ò–ê–õ–û–ì–ê ====
{history_context}

==== –ó–ê–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ====
{query}

==== –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –û–¢–í–ï–¢–£ ====
1. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –∫–Ω–∏–≥–∏ (–∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã—à–µ)
2. –î–∞–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
3. –ê–¥–∞–ø—Ç–∏—Ä—É–π –æ—Ç–≤–µ—Ç –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç:
   - –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–∑ –∫–Ω–∏–≥–∏
   - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
   - –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
5. –¶–∏—Ç–∏—Ä—É–π –≥–ª–∞–≤—ã: [–ì–ª–∞–≤–∞ 1, ¬ß1.1]
6. –ë—É–¥—å –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–º, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤—ã–º

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ + —Ç–µ–∫—Å—Ç–∞):
"""

        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
        response = self.model.generate_content(full_prompt)
        
        return response.text
```

***

### **–≠–¢–ê–ü 4: –ü–µ—Ä—Å–æ–Ω—ã (Sub-Agents)**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 4.1: –ì–ª–∞–≤–Ω–∞—è –ü–µ—Ä—Å–æ–Ω–∞ - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä**

**–§–∞–π–ª:** `linguistics/personas/coordinator.py`

```python
"""
–ü–ï–†–°–û–ù–ê #0: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∏
–ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ —ç–∫—Å–ø–µ—Ä—Ç–∞–º
"""

from linguistics.rag.retriever import BookRetriever
from linguistics.rag.generator import ResponseGenerator
from linguistics.memory.progress import ProgressTracker
from linguistics.memory.conversation import ConversationMemory

class LinguisticsCoordinator:
    def __init__(self, db_client):
        self.retriever = BookRetriever(db_client)
        self.generator = ResponseGenerator()
        self.progress = ProgressTracker(db_client)
        self.memory = ConversationMemory(db_client)
        
        # –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–∫—Å–ø–µ—Ä—Ç—ã
        self.experts = {
            "–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è": "–ú–∞—Å—Ç–µ—Ä –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
            "—Ä–∞–ø–ø–æ—Ä—Ç": "–ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–∞–ø–ø–æ—Ä—Ç–∞",
            "—ç–º–æ—Ü–∏–∏": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¶–µ–Ω—Ç—Ä",
            "–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å": "–ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä",
            "—Å—Ç—Ä–∞—Ç–µ–≥–∏—è": "–°—Ç—Ä–∞—Ç–µ–≥ –í–ª–∏—è–Ω–∏—è",
            "—Å—Ç—Ä–∞—Ö–∏": "–ü—Å–∏—Ö–æ–ª–æ–≥ –°—Ç—Ä–∞—Ö–æ–≤",
            "–≤–Ω–µ—à–Ω–æ—Å—Ç—å": "–ö–æ—É—á –ø–æ –í–Ω–µ—à–Ω–æ—Å—Ç–∏",
            "–ø—Ä–∞–∫—Ç–∏–∫–∞": "–ú–∞—Å—Ç–µ—Ä –ü—Ä–∞–∫—Ç–∏–∫",
            "–ø–ª–∞–Ω": "–ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä"
        }
    
    SYSTEM_PROMPT = """
–¢—ã ‚Äî –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã –æ–±—É—á–µ–Ω–∏—è "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞" –§–∏–ª–∏–ø–ø–∞ –ë–æ–≥–∞—á–µ–≤–∞.

–¢–≤–æ—è —Ä–æ–ª—å:
‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫ –Ω—É–∂–Ω–æ–º—É —ç–∫—Å–ø–µ—Ä—Ç—É (#1-9)
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
‚Ä¢ –ú–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å

–î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–∫—Å–ø–µ—Ä—Ç—ã:
1. –ú–∞—Å—Ç–µ—Ä –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ ‚Üí –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—â–µ–Ω–∏—è, 5 —ç—Ç–∞–ø–æ–≤, –ø—Ä–∞–≤–∏–ª–æ 3-15 —Å–µ–∫
2. –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–∞–ø–ø–æ—Ä—Ç–∞ ‚Üí 6 —É—Ä–æ–≤–Ω–µ–π –¥–æ–≤–µ—Ä–∏—è, –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏, —Å—Ö–æ–∂–µ—Å—Ç—å
3. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¶–µ–Ω—Ç—Ä ‚Üí –¶–µ–Ω—Ç—Ä–æ–≤–∫–∞, —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
4. –ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä ‚Üí –†–µ—á–µ–≤–∞—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏, —Ç–µ–º—ã
5. –°—Ç—Ä–∞—Ç–µ–≥ –í–ª–∏—è–Ω–∏—è ‚Üí –ò–≥—Ä–∞ vs –í–æ–π–Ω–∞, —Ü–µ–ª–∏, –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã
6. –ü—Å–∏—Ö–æ–ª–æ–≥ –°—Ç—Ä–∞—Ö–æ–≤ ‚Üí –ü—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –±–∞—Ä—å–µ—Ä–æ–≤, baby steps
7. –ö–æ—É—á –ø–æ –í–Ω–µ—à–Ω–æ—Å—Ç–∏ ‚Üí –ü–µ—Ä–≤–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä—ã –∑–¥–æ—Ä–æ–≤—å—è
8. –ú–∞—Å—Ç–µ—Ä –ü—Ä–∞–∫—Ç–∏–∫ ‚Üí –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –¥–æ–º–∞—à–∫–∏, —Ç—Ä–µ–∫–∏–Ω–≥
9. –ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä ‚Üí –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏:
1. –ü–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–π —Ç–µ–ø–ª–æ
2. –£–∑–Ω–∞–π —Ü–µ–ª—å –æ–±—Ä–∞—â–µ–Ω–∏—è (–ø—Ä–æ–¥–∞–∂–∏? –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã? –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞?)
3. –û—Ü–µ–Ω–∏ —É—Ä–æ–≤–µ–Ω—å (–Ω–æ–≤–∏—á–æ–∫? –µ—Å—Ç—å –æ–ø—ã—Ç?)
4. –ü—Ä–µ–¥–ª–æ–∂–∏ –Ω–∞—á–∞—Ç—å —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–ª–∏ –Ω–∞–ø—Ä–∞–≤—å –∫ —ç–∫—Å–ø–µ—Ä—Ç—É

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö:
‚Ä¢ –í—Å–ø–æ–º–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ—à–ª—ã—Ö –±–µ—Å–µ–¥
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º
‚Ä¢ –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π –ø–ª–∞–Ω –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è:
‚Ä¢ –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, –∞ –Ω–µ —Å—Ç—Ä–æ–≥–∏–π —É—á–∏—Ç–µ–ª—å
‚Ä¢ –ì–æ–ª–æ—Å: –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π, —É–≤–µ—Ä–µ–Ω–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π
‚Ä¢ –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã –¥–ª—è –≥–æ–ª–æ—Å–∞ (–¥–æ 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π –º–µ—Ç–∞—Ñ–æ—Ä—ã –∏–∑ –∫–Ω–∏–≥–∏ ("—Ç–∞–Ω–µ—Ü —Å –∫–ª–∏–µ–Ω—Ç–æ–º")
"""
    
    def process_request(self, user_id: str, query: str, modality: str = "voice") -> Dict:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        Returns:
            {
                "text": "...",
                "voice_ssml": "<speak>...</speak>",
                "action": "route_to_expert" | "exercise" | "chat",
                "expert": "rapport" | None,
                "metadata": {...}
            }
        """
        # 1. –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç: –∏—Å—Ç–æ—Ä–∏—è + –ø—Ä–æ–≥—Ä–µ—Å—Å
        history = self.memory.get_recent_history(user_id, limit=5)
        progress = self.progress.get_user_progress(user_id)
        
        # 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–µ–Ω –ª–∏ –ø–æ–∏—Å–∫ –ø–æ –∫–Ω–∏–≥–µ
        needs_rag = self._needs_book_context(query)
        
        context = []
        if needs_rag:
            context = self.retriever.search(
                query=query,
                filters={"level": progress.get("level", "beginner")},
                top_k=3
            )
        
        # 3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        enhanced_prompt = f"""
{self.SYSTEM_PROMPT}

==== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï ====
–£—Ä–æ–≤–µ–Ω—å: {progress.get('level', '–Ω–æ–≤–∏—á–æ–∫')}
–¢–µ–∫—É—â–∞—è –≥–ª–∞–≤–∞: {progress.get('current_chapter', '–Ω–µ –Ω–∞—á–∞–ª')}
–ü—Ä–æ–π–¥–µ–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π: {len(progress.get('completed_exercises', []))}
–¶–µ–ª–∏: {', '.join(progress.get('goals', ['–Ω–µ —É–∫–∞–∑–∞–Ω—ã'])[:3])}

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
{self._format_recent_progress(progress)}
"""
        
        # 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
        response_text = self.generator.generate(
            query=query,
            context=context,
            persona_prompt=enhanced_prompt,
            conversation_history=history
        )
        
        # 5. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ (route/exercise/chat)
        action, expert = self._detect_action(response_text, query)
        
        # 6. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–ª—è –≥–æ–ª–æ—Å–∞
        voice_ssml = self._text_to_ssml(response_text, modality)
        
        # 7. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å
        self.memory.add_message(user_id, {
            "role": "user",
            "content": query,
            "timestamp": datetime.now().isoformat(),
            "modality": modality
        })
        
        self.memory.add_message(user_id, {
            "role": "assistant",
            "content": response_text,
            "timestamp": datetime.now().isoformat(),
            "modality": modality,
            "persona": "coordinator",
            "metadata": {"action": action, "expert": expert}
        })
        
        return {
            "text": response_text,
            "voice_ssml": voice_ssml,
            "action": action,
            "expert": expert,
            "metadata": {
                "context_used": len(context),
                "user_level": progress.get("level")
            }
        }
    
    def _needs_book_context(self, query: str) -> bool:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –ø–æ–∏—Å–∫ –ø–æ –∫–Ω–∏–≥–µ"""
        keywords = [
            "–∫–∞–∫", "—á—Ç–æ —Ç–∞–∫–æ–µ", "—Ä–∞—Å—Å–∫–∞–∂–∏", "–æ–±—ä—è—Å–Ω–∏",
            "—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ", "—Ç–µ—Ö–Ω–∏–∫–∞", "–º–µ—Ç–æ–¥", "—Ä–∞–ø–ø–æ—Ä—Ç",
            "–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è", "–ø—Ä–æ–¥–∞–∂–∏"
        ]
        return any(kw in query.lower() for kw in keywords)
    
    def _detect_action(self, response: str, query: str) -> tuple:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è –∏ —ç–∫—Å–ø–µ—Ä—Ç–∞"""
        # –ü—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —á–µ—Ä–µ–∑ LLM)
        if "–Ω–∞–ø—Ä–∞–≤–ª—è—é —Ç–µ–±—è –∫" in response.lower():
            for key, name in self.experts.items():
                if name.lower() in response.lower():
                    return ("route_to_expert", key)
        
        if "—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ" in response.lower() or "–ø–æ–ø—Ä–∞–∫—Ç–∏–∫—É–π" in response.lower():
            return ("exercise", None)
        
        return ("chat", None)
    
    def _text_to_ssml(self, text: str, modality: str) -> str:
        """–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ SSML –¥–ª—è TTS"""
        if modality != "voice":
            return text
        
        # –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
        ssml = f"<speak>{text}</speak>"
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—É–∑—ã –ø–æ—Å–ª–µ –≤–æ–ø—Ä–æ—Å–æ–≤
        ssml = ssml.replace("?", "?<break time='500ms'/>")
        
        return ssml
    
    def _format_recent_progress(self, progress: Dict) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π"""
        exercises = progress.get("completed_exercises", [])
        if not exercises:
            return "–ü–æ–∫–∞ –Ω–µ –Ω–∞—á–∞–ª –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è"
        
        recent = exercises[-3:]  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 3
        return "\n".join([
            f"‚Ä¢ {ex['exercise']} (–æ—Ü–µ–Ω–∫–∞: {ex.get('score', '?')}/10)"
            for ex in recent
        ])
```

***

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 4.2: –ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–µ—Ä—Ç–∞ - –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–∞–ø–ø–æ—Ä—Ç–∞**

**–§–∞–π–ª:** `linguistics/personas/rapport.py`

```python
"""
–ü–ï–†–°–û–ù–ê #2: –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–∞–ø–ø–æ—Ä—Ç–∞
–≠–∫—Å–ø–µ—Ä—Ç –ø–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ–≤–µ—Ä–∏—è
"""

from linguistics.rag.retriever import BookRetriever
from linguistics.rag.generator import ResponseGenerator

class RapportMentor:
    def __init__(self, db_client):
        self.retriever = BookRetriever(db_client)
        self.generator = ResponseGenerator()
    
    SYSTEM_PROMPT = """
–¢—ã ‚Äî –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ –†–∞–ø–ø–æ—Ä—Ç—É –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞" –§–∏–ª–∏–ø–ø–∞ –ë–æ–≥–∞—á–µ–≤–∞.

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ 6 —É—Ä–æ–≤–Ω–µ–π —Ä–∞–ø–ø–æ—Ä—Ç–∞ (–æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –∫—Ä—É–≥–∞)
‚Ä¢ –§–æ—Ä–º—É–ª–∞: –†–ê–ü–ü–û–†–¢ = –î–æ–≤–µ—Ä–∏–µ + –ò–Ω—Ç–µ—Ä–µ—Å = –°—Ö–æ–∂–µ—Å—Ç—å √ó –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å
‚Ä¢ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
‚Ä¢ –ü—Ä–∞–≤–∏–ª–æ: "–†–∞–ø–ø–æ—Ä—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ–±—è"
‚Ä¢ –¢–µ—Ö–Ω–∏–∫–∏: –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã, –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∏

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –æ–±—É—á–µ–Ω–∏—è:
1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–π —Å–∏—Ç—É–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –û–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–ø–ø–æ—Ä—Ç–∞
3. –î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ
4. –û–±—ä—è—Å–Ω–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (–°–û–ö)

–°—Ç–∏–ª—å:
‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–Ω—ã–π –∫–æ—É—á, –∞ –Ω–µ —Ç–µ–æ—Ä–µ—Ç–∏–∫
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∂–∏–∑–Ω–∏ –∏ –∫–Ω–∏–≥–∏
‚Ä¢ –ö–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –≥–æ–ª–æ—Å–∞
‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏—è: "–¢—ã —É–∂–µ –º–æ–ª–æ–¥–µ—Ü, —á—Ç–æ –∑–∞–¥–∞–ª —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å!"

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:
1. –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (1 —Ñ—Ä–∞–∑–∞)
2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫–Ω–∏–≥–∏ [—Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–∞–≤—É]
3. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "—Å–¥–µ–ª–∞–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å"
4. –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

–ü–æ–º–Ω–∏: –†–∞–ø–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –Ω–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è, –∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å!
"""
    
    def answer(self, user_id: str, query: str, user_context: Dict) -> Dict:
        """
        –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ —Ä–∞–ø–ø–æ—Ä—Ç—É
        
        Args:
            query: –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user_context: {level, goals, history}
        
        Returns:
            {text, voice_ssml, exercise, references}
        """
        # 1. RAG-–ø–æ–∏—Å–∫ –ø–æ –≥–ª–∞–≤–∞–º –æ —Ä–∞–ø–ø–æ—Ä—Ç–µ
        context = self.retriever.search(
            query=query,
            filters={"chapter": "–†–∞–ø–ø–æ—Ä—Ç"},
            top_k=5
        )
        
        # 2. –†–∞—Å—à–∏—Ä—è–µ–º –ø—Ä–æ–º–ø—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        enhanced_prompt = f"""
{self.SYSTEM_PROMPT}

==== –û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï ====
–£—Ä–æ–≤–µ–Ω—å: {user_context.get('level', '–Ω–∞—á–∏–Ω–∞—é—â–∏–π')}
–û–ø—ã—Ç: {user_context.get('experience', '–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö')}
–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞: {user_context.get('current_goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–∞')}
"""
        
        # 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
        response = self.generator.generate(
            query=query,
            context=context,
            persona_prompt=enhanced_prompt
        )
        
        # 4. –ò–∑–≤–ª–µ–∫–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏ —Å—Å—ã–ª–∫–∏
        exercise = self._extract_exercise(response)
        references = self._extract_references(context)
        
        return {
            "text": response,
            "voice_ssml": f"<speak>{response}</speak>",
            "exercise": exercise,
            "references": references
        }
    
    def _extract_exercise(self, text: str) -> Dict:
        """–ò–∑–≤–ª–µ—á—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞"""
        # –ü—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —á–µ—Ä–µ–∑ regex)
        if "—É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ" in text.lower():
            return {
                "title": "–ü—Ä–∞–∫—Ç–∏–∫–∞ —Ä–∞–ø–ø–æ—Ä—Ç–∞",
                "description": text,  # –í–µ—Å—å —Ç–µ–∫—Å—Ç –ø–æ–∫–∞
                "duration": "10-15 –º–∏–Ω—É—Ç",
                "difficulty": "beginner"
            }
        return None
    
    def _extract_references(self, context: List[Dict]) -> List[str]:
        """–ò–∑–≤–ª–µ—á—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥–ª–∞–≤—ã"""
        refs = []
        for c in context:
            chapter = c['metadata'].get('chapter', '')
            section = c['metadata'].get('section', '')
            if chapter:
                refs.append(f"{chapter} ‚Üí {section}")
        return list(set(refs))[:3]  # –¢–æ–ø-3 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö
```

***

### **–≠–¢–ê–ü 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 5.1: –ì–ª–∞–≤–Ω—ã–π orchestrator**

**–§–∞–π–ª:** `main_linguistics.py`

```python
"""
–ì–ª–∞–≤–Ω—ã–π orchestrator –¥–ª—è –ø–µ—Ä—Å–æ–Ω—ã "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞"
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –≥–æ–ª–æ—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º
"""

import os
from linguistics.database.chroma_client import LinguisticsDB
from linguistics.personas.coordinator import LinguisticsCoordinator
from linguistics.personas.rapport import RapportMentor
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω—ã

class LinguisticsAssistant:
    def __init__(self):
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
        self.db = LinguisticsDB(persist_directory=os.getenv("CHROMA_DB_PATH", "./data/chroma_db"))
        
        # –ì–ª–∞–≤–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞
        self.coordinator = LinguisticsCoordinator(self.db)
        
        # –≠–∫—Å–ø–µ—Ä—Ç—ã (lazy loading)
        self.experts = {
            "rapport": lambda: RapportMentor(self.db),
            # –û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–±–∞–≤—è—Ç—Å—è –ø–æ–∑–∂–µ
        }
    
    def process_voice_request(self, user_id: str, audio_input: bytes) -> Dict:
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        
        Args:
            user_id: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Telegram/Discord ID)
            audio_input: –ê—É–¥–∏–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ bytes
        
        Returns:
            {
                "text_response": "...",
                "audio_response": bytes,  # TTS —á–µ—Ä–µ–∑ Gemini
                "visual_card": {...},     # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞
                "next_action": {...}
            }
        """
        # 1. STT (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –Ω–æ Gemini Live API —É–∂–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç)
        # text_query = self._speech_to_text(audio_input)
        
        # 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞
        response = self.coordinator.process_request(
            user_id=user_id,
            query=text_query,
            modality="voice"
        )
        
        # 3. –†–æ—É—Ç–∏–Ω–≥ –∫ —ç–∫—Å–ø–µ—Ä—Ç—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        if response["action"] == "route_to_expert":
            expert_name = response["expert"]
            expert = self.experts[expert_name]()
            
            response = expert.answer(
                user_id=user_id,
                query=text_query,
                user_context=self._get_user_context(user_id)
            )
        
        # 4. TTS —á–µ—Ä–µ–∑ Gemini
        audio_output = self._text_to_speech(response["voice_ssml"])
        
        # 5. –í–∏–∑—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–ª—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
        visual_card = self._create_visual_card(response)
        
        return {
            "text_response": response["text"],
            "audio_response": audio_output,
            "visual_card": visual_card,
            "next_action": {
                "type": response.get("action"),
                "exercise": response.get("exercise")
            }
        }
    
    def _text_to_speech(self, ssml: str) -> bytes:
        """TTS —á–µ—Ä–µ–∑ Gemini Live API"""
        # TODO: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Gemini 2.0 Live API
        # –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞
        return b""
    
    def _create_visual_card(self, response: Dict) -> Dict:
        """–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞"""
        return {
            "title": "üí¨ –õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞ | –ö–æ—É—á –ø–æ –ü—Ä–æ–¥–∞–∂–∞–º",
            "body": response["text"],
            "footer": f"–ò—Å—Ç–æ—á–Ω–∏–∫: {', '.join(response.get('references', []))}",
            "actions": [
                {"label": "üìù –ó–∞–ø–∏—Å–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ", "action": "save_exercise"},
                {"label": "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥", "action": "next_step"}
            ]
        }
    
    def _get_user_context(self, user_id: str) -> Dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        progress = self.coordinator.progress.get_user_progress(user_id)
        return {
            "level": progress.get("level", "beginner"),
            "experience": f"{len(progress.get('completed_exercises', []))} —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π",
            "current_goal": progress.get("goals", ["–Ω–µ —É–∫–∞–∑–∞–Ω–∞"])[0]
        }

# ========== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø ==========
if __name__ == "__main__":
    assistant = LinguisticsAssistant()
    
    # –°–∏–º—É–ª—è—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    user_id = "telegram_123456"
    query_text = "–ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–ø–ø–æ—Ä—Ç —Å –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º?"
    
    response = assistant.coordinator.process_request(
        user_id=user_id,
        query=query_text,
        modality="voice"
    )
    
    print("üéôÔ∏è –û–¢–í–ï–¢:")
    print(response["text"])
    print("\nüìä –ú–ï–¢–ê–î–ê–ù–ù–´–ï:")
    print(f"–î–µ–π—Å—Ç–≤–∏–µ: {response['action']}")
    print(f"–≠–∫—Å–ø–µ—Ä—Ç: {response.get('expert', '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä')}")
```

***

### **–≠–¢–ê–ü 6: –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω**

#### ‚úÖ **–ó–∞–¥–∞—á–∞ 6.1: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤**

**–§–∞–π–ª:** `linguistics/personas/prompts.py`

```python
"""
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω
"""

PROMPTS = {
    "coordinator": """
[–£–ñ–ï –ù–ê–ü–ò–°–ê–ù –í–´–®–ï –í coordinator.py]
""",
    
    "communication": """
–¢—ã ‚Äî –ú–∞—Å—Ç–µ—Ä –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ 5 —ç—Ç–∞–ø–æ–≤ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏: –ö–æ–Ω—Ç–∞–∫—Ç ‚Üí –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ ‚Üí –û–±—â–µ–Ω–∏–µ ‚Üí –†–∞—Å—Å—Ç–∞–≤–∞–Ω–∏–µ ‚Üí –ü–æ—Å–ª–µ–≤–∫—É—Å–∏–µ
‚Ä¢ –ü—Ä–∞–≤–∏–ª–æ 3-15 —Å–µ–∫—É–Ω–¥ (3 —Å–µ–∫ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ, 15 —Å–µ–∫ –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ)
‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –±–µ—Å–µ–¥—ã
‚Ä¢ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
‚Ä¢ –ü–µ—Ä–µ–≤–æ–¥—ã —Ç–µ–º—ã —Å–ª–æ–≤–æ–º "–ö–°–¢–ê–¢–ò"

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –†–∞—Å—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ –ø–∏–∫–µ —ç–º–æ—Ü–∏–π
2. –ù–µ –∑–∞—Ç—è–≥–∏–≤–∞—Ç—å –æ–±—â–µ–Ω–∏–µ
3. –ü–µ—Ä–≤–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–π, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ —Å–µ–π—á–∞—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚Ä¢ –î–∞–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ –æ—Ç—Ä–∞–±–æ—Ç–∫—É —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞
‚Ä¢ –û–±—ä—è—Å–Ω–∏ –∫—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞ (–°–û–ö)
""",
    
    "rapport": """
[–£–ñ–ï –ù–ê–ü–ò–°–ê–ù –í–´–®–ï –í rapport.py]
""",
    
    "emotions": """
–¢—ã ‚Äî –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¶–µ–Ω—Ç—Ä –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ –ë–∞–∑–æ–≤—ã–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è: –ê–ü, –ê–ù, –ü–ü, –ü–ù, –ù–µ–π—Ç—Ä–∞–ª—å
‚Ä¢ –¶–µ–Ω—Ç—Ä–æ–≤–∫–∞ (—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–∞)
‚Ä¢ –¢–µ—Ö–Ω–∏–∫–∞ "–ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ" (–≤–¥–æ—Ö-–ø–∞—É–∑–∞-–≤—ã–¥–æ—Ö-–ø–∞—É–∑–∞ –ø–æ 3-5 —Å–µ–∫)
‚Ä¢ –ü–û–ú (–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π –û–±—Ä–∞–∑ –ú—ã—à–ª–µ–Ω–∏—è) –∏–∑ –∫–Ω–∏–≥–∏ "–£—Å–ø–µ—Ö"

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –ë–∞–∑–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–∞ ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å
2. –≠–º–æ—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥—É—é—Ç —ç–Ω–µ—Ä–≥–∏—é ‚Üí —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∞ —ç–∫–æ–Ω–æ–º–∏—Ç —Å–∏–ª—ã
3. –¢–æ—á–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è = –ø—Ä—ã–∂–∫–∏ –ü–ü ‚Üî –ü–ù

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Ä¢ –ï—Å–ª–∏ –Ω–µ–≥–∞—Ç–∏–≤ ‚Üí –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ 5 –º–∏–Ω—É—Ç
‚Ä¢ –ï—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–∑–±—É–∂–¥–µ–Ω–∏–µ ‚Üí –º–µ–¥–∏—Ç–∞—Ü–∏—è –ø–æ–∫–æ—è
‚Ä¢ –¶–µ–ª—å: –≤—ã—Ö–æ–¥ –≤ —Ü–µ–Ω—Ç—Ä–æ–≤–∫—É –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ–π
""",
    
    "creativity": """
–¢—ã ‚Äî –ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ –õ–∏–Ω–≥–≤–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø–∏—Ä–∞–º–∏–¥—ã (–æ–±–æ–±—â–µ–Ω–∏–µ ‚Üî —Ä–∞–∑–æ–±—â–µ–Ω–∏–µ ‚Üî –∞–Ω–∞–ª–æ–≥–∏–∏)
‚Ä¢ –ü–æ—Ç–æ–∫ —Å–æ–∑–Ω–∞–Ω–∏—è (–¥—É–º–∞—Ç—å –≤—Å–ª—É—Ö 10 –º–∏–Ω—É—Ç)
‚Ä¢ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ (–º–∏—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ª–∞–º–ø–æ—á–µ–∫!)
‚Ä¢ –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–æ–∫–∫—É (5-7-5 —Å–ª–æ–≥–æ–≤)

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –ë—Ä–µ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä = –Ω–∞–≤—ã–∫ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —á—ë–º —É–≥–æ–¥–Ω–æ
2. –†–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫—É, –∞ –Ω–µ —á—Ç–µ–Ω–∏–µ
3. –ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞: –∏—Å—Ç–µ—Ä–∏—á–µ—Å–∫–∏–π —Å–º–µ—Ö —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –î–∞–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û —á—ë–º –≤–∏–∂—É, –æ —Ç–æ–º –ø–æ—é")
‚Ä¢ –û–±—ä—è—Å–Ω–∏, –∫–∞–∫ –¥–µ–ª–∞—Ç—å (–ø–æ—à–∞–≥–æ–≤–æ)
‚Ä¢ –ú–æ—Ç–∏–≤–∏—Ä—É–π: "–≠—Ç–æ –≤–µ—Å–µ–ª–æ –∏ –ø–æ–ª–µ–∑–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!"
""",
    
    "strategy": """
–¢—ã ‚Äî –°—Ç—Ä–∞—Ç–µ–≥ –í–ª–∏—è–Ω–∏—è –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ –¢—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è: –í–æ–π–Ω–∞ ‚Üî –ò–≥—Ä–∞ ‚Üî –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è
‚Ä¢ –ò–≥—Ä–∞ –≤ –ø—Ä–æ–¥–∞–∂–∞—Ö >>> –í–æ–π–Ω–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
‚Ä¢ –¶–µ–ª–∏ –≤ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (–∏–∑ –∫–Ω–∏–≥–∏ "–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ü–µ–ª–µ–π")
‚Ä¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ (80% —Ä–∞–ø–ø–æ—Ä—Ç, 10% –∏–Ω—Ñ–æ, 5% –ø—Ä–æ–¥–∞–∂–∞, 5% –≤—ã—Ö–æ–¥)

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –í –∏–≥—Ä–µ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å —Ä–µ—Å—É—Ä—Å—ã, –≤ –≤–æ–π–Ω–µ —Ç—Ä–∞—Ç–∏—à—å
2. –ü—Ä–æ–¥–∞–∂–∞ = –ø–æ–ø—Ä–æ—Å–∏—Ç—å –Ω–∞ —Ä–∞–ø–ø–æ—Ä—Ç–µ
3. –í–æ–∑—Ä–∞–∂–µ–Ω–∏–π –Ω–µ –±—ã–≤–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º —Ä–∞–ø–ø–æ—Ä—Ç–µ

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏, –≤ –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚Ä¢ –ï—Å–ª–∏ –≤–æ–π–Ω–∞ ‚Üí –ø–µ—Ä–µ–≤–µ–¥–∏ –≤ –∏–≥—Ä—É (—Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å)
‚Ä¢ –ï—Å–ª–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è ‚Üí –º–æ—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ü–µ–ª–∏
""",
    
    "fears": """
–¢—ã ‚Äî –ü—Å–∏—Ö–æ–ª–æ–≥ –°—Ç—Ä–∞—Ö–æ–≤ –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ 3 —É—Ä–æ–≤–Ω—è —Å—Ç—Ä–∞—Ö–æ–≤: –î–µ–π—Å—Ç–≤–∏—è ‚Üí –°–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí –ë–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç–∏
‚Ä¢ Baby Steps (—Ä–∞–∑–±–∏—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∏–Ω–∏-—à–∞–≥–∏)
‚Ä¢ –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –¥–ª—è —Å–Ω—è—Ç–∏—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏
‚Ä¢ –¢–≠–° (–¢–µ—Ö–Ω–∏–∫–∏ –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –°–≤–æ–±–æ–¥—ã)

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –°—Ç—Ä–∞—Ö –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏–µ
2. –ü–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ = —Å–¥–µ–ª–∞—Ç—å —Ç–æ, —á–µ–≥–æ –±–æ–∏—à—å—Å—è
3. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è ‚Äî –Ω–∞—á–∞—Ç—å

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏ —Å—Ç—Ä–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Ä¢ –†–∞–∑–±–µ–π –Ω–∞ baby steps (6-7 —à–∞–≥–æ–≤)
‚Ä¢ –î–∞–π –ø–µ—Ä–≤—ã–π —à–∞–≥ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
‚Ä¢ –ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞ = —Å–¥–µ–ª–∞–ª, –∞ –Ω–µ "–±–æ–ª—å—à–µ –Ω–µ –±–æ—é—Å—å"
""",
    
    "appearance": """
–¢—ã ‚Äî –ö–æ—É—á –ø–æ –í–Ω–µ—à–Ω–µ–º—É –í–∏–¥—É –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ –¢—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä—ã –∑–¥–æ—Ä–æ–≤—å—è: –æ—Å–∞–Ω–∫–∞, —Ä—É–∫–∏, –≤–æ–ª–æ—Å—ã, –∑–∞–ø–∞—Ö, –æ–¥–µ–∂–¥–∞
‚Ä¢ –ü–µ—Ä–≤–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã
‚Ä¢ –£—Ä–æ–≤–µ–Ω—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ 25 –ª–µ—Ç
‚Ä¢ –ú–∏–º–∏–∫–∞: –∫–æ–Ω—á–∏–∫ –Ω–æ—Å–∞, —É–ª—ã–±–∫–∞ –î–∂–æ–∫–æ–Ω–¥—ã, –æ—Ç–∫—Ä—ã—Ç—ã–π –≤–∑–≥–ª—è–¥

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ = –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
2. –õ—É—á—à–µ –±—é–¥–∂–µ—Ç–Ω—ã–π –±—Ä–µ–Ω–¥, —á–µ–º —Ñ–µ–π–∫
3. –ú–∞–∫–∏—è–∂ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–µ–≤—ã–º
4. –ß–∏—Å—Ç–æ—Ç–∞ >>> –±—Ä–µ–Ω–¥–æ–≤–æ—Å—Ç—å

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å (—Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ? —Å–≤–∏–¥–∞–Ω–∏–µ? –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã?)
‚Ä¢ –î–∞–π —á–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–æ–±—ã—Ç–∏–µ–º
‚Ä¢ –û–±—ä—è—Å–Ω–∏ "–ø–æ—á–µ–º—É" (–Ω–µ –ø—Ä–æ—Å—Ç–æ "–Ω–∞–¥–æ", –∞ –ª–æ–≥–∏–∫–∞)
""",
    
    "practice": """
–¢—ã ‚Äî –ú–∞—Å—Ç–µ—Ä –ü—Ä–∞–∫—Ç–∏–∫ –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞:
‚Ä¢ –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏–∑ –∫–Ω–∏–≥–∏ (100+ –ø—Ä–∞–∫—Ç–∏–∫)
‚Ä¢ –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ –≥–ª–∞–≤–∞–º
‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–¥–Ω–µ–≤–Ω–∏–∫, —Ç—Ä–µ–∫–∏–Ω–≥)
‚Ä¢ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–°–û–ö)

–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
1. –ó–Ω–∞–Ω–∏—è –±–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏ = 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
2. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–µ–ª–∞—Ç—å, –∞ –Ω–µ —á–∏—Ç–∞—Ç—å
3. –ú–∞—Å—Ç–µ—Ä = —Ç–æ—Ç, –∫—Ç–æ —Å–æ–≤–µ—Ä—à–∏–ª –±–æ–ª—å—à–µ –æ—à–∏–±–æ–∫

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–∏ —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Ä¢ –î–∞–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å
‚Ä¢ –û–±—ä—è—Å–Ω–∏: —á—Ç–æ –¥–µ–ª–∞—Ç—å, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
‚Ä¢ –ó–∞–≤—Ç—Ä–∞ –ø—Ä–æ–≤–µ—Ä—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
""",
    
    "integrator": """
–¢—ã ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –∏–∑ –∫–Ω–∏–≥–∏ "–õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞".

–¢–≤–æ—è —Ä–æ–ª—å:
‚Ä¢ –°–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è –Ω–∞ 6-12 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –£—á–µ—Å—Ç—å —Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è "10 —Ü–µ–ª–µ–π")
‚Ä¢ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–æ—Ä–∏—é –∏ –ø—Ä–∞–∫—Ç–∏–∫—É
‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:
1. –£–∑–Ω–∞–π 10 —Ü–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –û–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å (—Ç–µ—Å—Ç?)
3. –°–æ—Å—Ç–∞–≤—å roadmap –ø–æ —É—Ä–æ–≤–Ω—è–º —Ä–∞–ø–ø–æ—Ä—Ç–∞
4. –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –Ω–µ–¥–µ–ª—è–º
5. –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü ‚Äî —Ä–µ–≤—å—é –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∞:
‚Ä¢ –ú–µ—Å—è—Ü 1-2: –†–∞–ø–ø–æ—Ä—Ç —É—Ä–æ–≤–µ–Ω—å 1 (–ù–∞—á–∏–Ω–∞—é—â–∏–π)
‚Ä¢ –ú–µ—Å—è—Ü 3-4: –†–∞–ø–ø–æ—Ä—Ç —É—Ä–æ–≤–µ–Ω—å 2 (–°—Ä–µ–¥–Ω–∏–π)
‚Ä¢ –ú–µ—Å—è—Ü 5-6: –†–∞–ø–ø–æ—Ä—Ç —É—Ä–æ–≤–µ–Ω—å 3 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)
‚Ä¢ + –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: —ç–º–æ—Ü–∏–∏, –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–∞—Ö–∞–º–∏
"""
}
```

***

## üöÄ –ü–õ–ê–ù –ó–ê–ü–£–°–ö–ê

### **–ù–µ–¥–µ–ª—è 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- [ ] –î–µ–Ω—å 1-2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ChromaDB, –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–Ω–∏–≥–∏
- [ ] –î–µ–Ω—å 3-4: –°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ (–∏—Å—Ç–æ—Ä–∏—è + –ø—Ä–æ–≥—Ä–µ—Å—Å)
- [ ] –î–µ–Ω—å 5-7: RAG Engine (retriever + generator)

### **–ù–µ–¥–µ–ª—è 2: –ü–µ—Ä—Å–æ–Ω—ã**
- [ ] –î–µ–Ω—å 1-2: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (#0)
- [ ] –î–µ–Ω—å 3-4: –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–∞–ø–ø–æ—Ä—Ç–∞ (#2) + –ú–∞—Å—Ç–µ—Ä –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (#1)
- [ ] –î–µ–Ω—å 5-7: –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–∫—Å–ø–µ—Ä—Ç—ã (#3-9) - –±–∞–∑–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏

### **–ù–µ–¥–µ–ª—è 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- [ ] –î–µ–Ω—å 1-3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º
- [ ] –î–µ–Ω—å 4-5: TTS/STT —á–µ—Ä–µ–∑ Gemini Live API
- [ ] –î–µ–Ω—å 6-7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### **–ù–µ–¥–µ–ª—è 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞**
- [ ] –î–µ–Ω—å 1-3: UI –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
- [ ] –î–µ–Ω—å 4-5: –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –î–µ–Ω—å 6-7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π

---

## üìä –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´ –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø

```
1. linguistics/database/chroma_client.py         [–ì–û–¢–û–í –ö–û–î]
2. linguistics/rag/chunker.py                    [–ì–û–¢–û–í –ö–û–î]
3. linguistics/memory/conversation.py            [–ì–û–¢–û–í –ö–û–î]
4. linguistics/memory/progress.py                [–ì–û–¢–û–í –ö–û–î]
5. linguistics/rag/retriever.py                  [–ì–û–¢–û–í –ö–û–î]
6. linguistics/rag/generator.py                  [–ì–û–¢–û–í –ö–û–î]
7. linguistics/personas/coordinator.py           [–ì–û–¢–û–í –ö–û–î]
8. linguistics/personas/rapport.py               [–ì–û–¢–û–í –ö–û–î]
9. linguistics/personas/prompts.py               [–ì–û–¢–û–í –ö–û–î]
10. main_linguistics.py                          [–ì–û–¢–û–í –ö–û–î]
11. scripts/setup_linguistics_db.py              [–ì–û–¢–û–í –ö–û–î]
12. requirements.txt                             [–ù–£–ñ–ù–û –°–û–ó–î–ê–¢–¨]
```

***

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### **MVP (–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –†–∞–±–æ—Ç–∞—é—â–∏–π –ü—Ä–æ–¥—É–∫—Ç):**
1. ‚úÖ ChromaDB + –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–Ω–∏–≥–∏
2. ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (#0) —Å RAG
3. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ (–∏—Å—Ç–æ—Ä–∏—è + –ø—Ä–æ–≥—Ä–µ—Å—Å)
4. ‚úÖ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ Gemini
5. ‚úÖ 1 —ç–∫—Å–ø–µ—Ä—Ç (–†–∞–ø–ø–æ—Ä—Ç) –¥–ª—è —Ç–µ—Å—Ç–∞

### **V1.0 (–ü–æ–ª–Ω–∞—è –í–µ—Ä—Å–∏—è):**
6. ‚úÖ –í—Å–µ 9 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
7. ‚úÖ –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
8. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–∞
9. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–º–∏

### **V2.0 (–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è):**
10. ‚úÖ Fine-tuning –º–æ–¥–µ–ª–µ–π –Ω–∞ –¥–∏–∞–ª–æ–≥–∞—Ö
11. ‚úÖ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è (–±–∞–¥–∂–∏, —É—Ä–æ–≤–Ω–∏)
12. ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
13. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM

***

## üí° FAQ

**Q: ChromaDB –±—É–¥–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?**  
A: –î–∞, ChromaDB —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç. –≠—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `./data/chroma_db/`.

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤–µ–∫—Ç–æ—Ä—ã –∫–Ω–∏–≥–∏?**  
A: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ book.md. –ó–∞–ø—É—Å–∫–∞–µ—à—å `python scripts/setup_linguistics_db.py` ‚Üí –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –∫–Ω–∏–≥–∏?**  
A: –î–∞! –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—ë—à—å –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ ChromaDB –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—à—å –ø—Ä–æ—Ü–µ—Å—Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç Gemini API –¥–ª—è —ç—Ç–æ–≥–æ?**  
A: Embeddings: $0.00001/1K —Ç–æ–∫–µ–Ω–æ–≤  
   Text generation: $0.075/1M —Ç–æ–∫–µ–Ω–æ–≤  
   –î–ª—è 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å ‚âà $5-10/–º–µ—Å—è—Ü

***

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å –ª—é–±–æ–≥–æ —ç—Ç–∞–ø–∞! –ß—Ç–æ –¥–µ–ª–∞–µ–º –ø–µ—Ä–≤—ã–º?** üöÄ
